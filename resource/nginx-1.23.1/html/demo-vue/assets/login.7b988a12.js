import{r as S,s as w}from"./require.fcbd460e.js";import{n as k}from"./index.ff25725e.js";function P(x,s,n,e){return S({url:"/8/login",headers:{isToken:!1},method:"post",data:{username:x,password:s,verifyCode:n,uuid:e}})}function A(){return S({url:"/8/login",headers:{isToken:!1},method:"get",timeout:2e4})}(function(x){if(typeof exports=="object"&&typeof module<"u")module.exports=x();else{let s;typeof window<"u"?s=window:typeof global<"u"?s=global:typeof self<"u"?s=self:s=this,s.base64js=x()}})(function(){return function x(s,n,e){const t=typeof require=="function"&&require;function i(r,o){if(!n[r]){if(!s[r]){const d=typeof require=="function"&&require;if(!o&&d)return d(r,!0);if(t)return t(r,!0);const l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}const a=n[r]={exports:{}};s[r][0].call(a.exports,function(d){const l=s[r][1][d];return i(l||d)},a,a.exports,x,s,n,e)}return n[r].exports}for(let r=0;r<e.length;r++)i(e[r]);return i}({"/":[function(x,s,n){n.byteLength=l,n.toByteArray=B,n.fromByteArray=E;const e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let o=0,a=r.length;for(;o<a;++o)e[o]=r[o],t[r.charCodeAt(o)]=o;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function d(c){const f=c.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return c[f-2]==="="?2:c[f-1]==="="?1:0}function l(c){return c.length*3/4-d(c)}function B(c){let f,_,y,h,u;const T=c.length;h=d(c),u=new i(T*3/4-h),_=h>0?T-4:T;let m=0;for(f=0;f<_;f+=4)y=t[c.charCodeAt(f)]<<18|t[c.charCodeAt(f+1)]<<12|t[c.charCodeAt(f+2)]<<6|t[c.charCodeAt(f+3)],u[m++]=y>>16&255,u[m++]=y>>8&255,u[m++]=y&255;return h===2?(y=t[c.charCodeAt(f)]<<2|t[c.charCodeAt(f+1)]>>4,u[m++]=y&255):h===1&&(y=t[c.charCodeAt(f)]<<10|t[c.charCodeAt(f+1)]<<4|t[c.charCodeAt(f+2)]>>2,u[m++]=y>>8&255,u[m++]=y&255),u}function C(c){return e[c>>18&63]+e[c>>12&63]+e[c>>6&63]+e[c&63]}function g(c,f,_){let y;const h=[];for(let u=f;u<_;u+=3)y=(c[u]<<16)+(c[u+1]<<8)+c[u+2],h.push(C(y));return h.join("")}function E(c){let f;const _=c.length,y=_%3;let h="";const u=[],T=16383;let m=0,F=_-y;for(;m<F;m+=T)u.push(g(c,m,m+T>F?F:m+T));return y===1?(f=c[_-1],h+=e[f>>2],h+=e[f<<4&63],h+="=="):y===2&&(f=(c[_-2]<<8)+c[_-1],h+=e[f>>10],h+=e[f>>4&63],h+=e[f<<2&63],h+="="),u.push(h),u.join("")}},{}]},{},[])("/")});function p(){this.mode=1,this.isPadding=!0,this.sk=new Array(32)}function b(){this.SM4_ENCRYPT=1,this.SM4_DECRYPT=0;const x=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],s=[2746333894,1453994832,1736282519,2993693404],n=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257];this.GET_ULONG_BE=function(e,t){return(e[t]&255)<<24|(e[t+1]&255)<<16|(e[t+2]&255)<<8|e[t+3]&255&4294967295},this.PUT_ULONG_BE=function(e,t,i){var r=255&e>>24,o=255&e>>16,a=255&e>>8,d=255&e;t[i]=r>128?r-256:r,t[i+1]=o>128?o-256:o,t[i+2]=a>128?a-256:a,t[i+3]=d>128?d-256:d},this.SHL=function(e,t){return(e&4294967295)<<t},this.ROTL=function(e,t){return this.SHL(e,t)|e>>32-t},this.sm4Lt=function(e){let t,i;const r=new Array(4),o=new Array(4);return this.PUT_ULONG_BE(e,r,0),o[0]=this.sm4Sbox(r[0]),o[1]=this.sm4Sbox(r[1]),o[2]=this.sm4Sbox(r[2]),o[3]=this.sm4Sbox(r[3]),t=this.GET_ULONG_BE(o,0),i=t^this.ROTL(t,2)^this.ROTL(t,10)^this.ROTL(t,18)^this.ROTL(t,24),i},this.sm4F=function(e,t,i,r,o){return e^this.sm4Lt(t^i^r^o)},this.sm4CalciRK=function(e){let t,i;const r=new Array(4),o=new Array(4);return this.PUT_ULONG_BE(e,r,0),o[0]=this.sm4Sbox(r[0]),o[1]=this.sm4Sbox(r[1]),o[2]=this.sm4Sbox(r[2]),o[3]=this.sm4Sbox(r[3]),t=this.GET_ULONG_BE(o,0),i=t^this.ROTL(t,13)^this.ROTL(t,23),i},this.sm4Sbox=function(e){const t=e&255,i=x[t];return i>128?i-256:i},this.sm4_setkey_enc=function(e,t){if(e==null)return alert("ctx is null!"),!1;if(t==null||t.length!==16)return alert("key error!"),!1;e.mode=this.SM4_ENCRYPT,this.sm4_setkey(e.sk,t)},this.sm4_setkey_dec=function(e,t){t==null||t.length,e.mode=0,this.sm4_setkey(e.sk,t),e.sk=e.sk.reverse()},this.sm4_setkey=function(e,t){const i=new Array(4),r=new Array(36);i[0]=this.GET_ULONG_BE(t,0),i[1]=this.GET_ULONG_BE(t,4),i[2]=this.GET_ULONG_BE(t,8),i[3]=this.GET_ULONG_BE(t,12),r[0]=i[0]^s[0],r[1]=i[1]^s[1],r[2]=i[2]^s[2],r[3]=i[3]^s[3];for(let o=0;o<32;o++)r[o+4]=r[o]^this.sm4CalciRK(r[o+1]^r[o+2]^r[o+3]^n[o]),e[o]=r[o+4]},this.padding=function(e,t){let i;if(e==null)return null;let r=null;if(t===this.SM4_ENCRYPT){i=parseInt(16-e.length%16),r=e.slice(0);for(let o=0;o<i;o++)r[e.length+o]=i}else i=e[e.length-1],r=e.slice(0,e.length-i);return r},this.sm4_one_round=function(e,t,i){let r=0;const o=new Array(36);for(o[0]=this.GET_ULONG_BE(t,0),o[1]=this.GET_ULONG_BE(t,4),o[2]=this.GET_ULONG_BE(t,8),o[3]=this.GET_ULONG_BE(t,12);r<32;)o[r+4]=this.sm4F(o[r],o[r+1],o[r+2],o[r+3],e[r]),r++;this.PUT_ULONG_BE(o[35],i,0),this.PUT_ULONG_BE(o[34],i,4),this.PUT_ULONG_BE(o[33],i,8),this.PUT_ULONG_BE(o[32],i,12)},this.sm4_crypt_ecb=function(e,t){t==null&&alert("input is null!"),e.isPadding&&e.mode===this.SM4_ENCRYPT&&(t=this.padding(t,this.SM4_ENCRYPT));let i=0,r=t.length,o=[];for(;r>0;r-=16){var a=new Array(16),d=t.slice(i*16,16*(i+1));this.sm4_one_round(e.sk,d,a),o=o.concat(a),i++}let l=o;for(e.isPadding&&e.mode===this.SM4_DECRYPT&&(l=this.padding(l,this.SM4_DECRYPT)),i=0;i<l.length;i++)l[i]<0&&(l[i]=l[i]+256);return l},this.sm4_crypt_cbc=function(e,t,i){let r,o,a,d;(t==null||t.length!==16)&&alert("iv error!"),i==null&&alert("input is null!"),e.isPadding&&e.mode===this.SM4_ENCRYPT&&(i=this.padding(i,this.SM4_ENCRYPT));let l=0,B=i.length,C=[];if(e.mode===this.SM4_ENCRYPT)for(d=0;B>0;B-=16){for(r=new Array(16),a=new Array(16),o=i.slice(d*16,16*(d+1)),l=0;l<16;l++)r[l]=o[l]^t[l];this.sm4_one_round(e.sk,r,a),t=a.slice(0,16),C=C.concat(a),d++}else{let E=[];for(d=0;B>0;B-=16){for(r=new Array(16),a=new Array(16),o=i.slice(d*16,16*(d+1)),E=o.slice(0,16),this.sm4_one_round(e.sk,o,r),l=0;l<16;l++)a[l]=r[l]^t[l];t=E.slice(0,16),C=C.concat(a),d++}}let g=C;for(e.isPadding&&e.mode===this.SM4_DECRYPT&&(g=this.padding(g,this.SM4_DECRYPT)),l=0;l<g.length;l++)g[l]<0&&(g[l]=g[l]+256);return g}}const L=function(){this.secretKey="GJwsXX_BzW=gJWJW",this.iv="ZkR_SiNoSOFT=568",this.hexString=!1,this.encryptDefault_ECB=function(x){try{const s=new b,n=new p;n.isPadding=!0,n.mode=s.SM4_ENCRYPT;const e=this.stringToByte(this.secretKey);s.sm4_setkey_enc(n,e);const t=s.sm4_crypt_ecb(n,this.stringToByte(x)),i=base64js.fromByteArray(t);return i!=null&&i.trim().length>0&&i.replace(/(\s*|\t|\r|\n)/g,""),i}catch(s){return console.error(s),null}},this.encryptCustom_ECB=function(x,s){try{const n=new b,e=new p;e.isPadding=!0,e.mode=n.SM4_ENCRYPT;const t=this.stringToByte(s);n.sm4_setkey_enc(e,t);const i=n.sm4_crypt_ecb(e,this.stringToByte(x)),r=base64js.fromByteArray(i);return r!=null&&r.trim().length>0&&r.replace(/(\s*|\t|\r|\n)/g,""),r}catch(n){return console.error(n),null}},this.decryptDefault_ECB=function(x){try{let s=new b,n=new p;n.isPadding=!0,n.mode=s.SM4_ENCRYPT;let e=this.stringToByte(this.secretKey);s.sm4_setkey_dec(n,e);let t=s.sm4_crypt_ecb(n,base64js.toByteArray(x));return this.byteToString(t)}catch(s){return console.error(s),null}},this.decryptCustom_ECB=function(x,s){try{let n=new b,e=new p;e.isPadding=!0,e.mode=n.SM4_ENCRYPT;let t=this.stringToByte(s);n.sm4_setkey_dec(e,t);let i=n.sm4_crypt_ecb(e,base64js.toByteArray(x));return this.byteToString(i)}catch(n){return console.error(n),null}},this.encryptDefault_CBC=function(x){try{const s=new b,n=new p;n.isPadding=!0,n.mode=s.SM4_ENCRYPT;const e=this.stringToByte(this.secretKey),t=this.stringToByte(this.iv);s.sm4_setkey_enc(n,e);const i=s.sm4_crypt_cbc(n,t,this.stringToByte(x)),r=base64js.fromByteArray(i);return r!=null&&r.trim().length>0&&r.replace(/(\s*|\t|\r|\n)/g,""),r}catch(s){return console.error(s),null}},this.encryptCustom_CBC=function(x,s,n){try{const e=new b,t=new p;t.isPadding=!0,t.mode=e.SM4_ENCRYPT;const i=this.stringToByte(n),r=this.stringToByte(s);e.sm4_setkey_enc(t,i);const o=e.sm4_crypt_cbc(t,r,this.stringToByte(x)),a=base64js.fromByteArray(o);return a!=null&&a.trim().length>0&&a.replace(/(\s*|\t|\r|\n)/g,""),a}catch(e){return console.error(e),null}},this.decryptDefault_CBC=function(x){try{let s=new b,n=new p;n.isPadding=!0,n.mode=s.SM4_ENCRYPT;let e=this.stringToByte(this.secretKey),t=this.stringToByte(this.iv);s.sm4_setkey_dec(n,e);let i=s.sm4_crypt_cbc(n,t,base64js.toByteArray(x));return this.byteToString(i)}catch(s){return console.error(s),null}},this.decryptCustom_CBC=function(x,s,n){try{let e=new b,t=new p;t.isPadding=!0,t.mode=e.SM4_ENCRYPT;let i=this.stringToByte(n),r=this.stringToByte(s);e.sm4_setkey_dec(t,i);let o=e.sm4_crypt_cbc(t,r,base64js.toByteArray(x));return this.byteToString(o)}catch(e){return console.error(e),null}},this.stringToByte=function(x){const s=[];let n,e;n=x.length;for(let t=0;t<n;t++)e=x.charCodeAt(t),e>=65536&&e<=1114111?(s.push(e>>18&7|240),s.push(e>>12&63|128),s.push(e>>6&63|128),s.push(e&63|128)):e>=2048&&e<=65535?(s.push(e>>12&15|224),s.push(e>>6&63|128),s.push(e&63|128)):e>=128&&e<=2047?(s.push(e>>6&31|192),s.push(e&63|128)):s.push(e&255);return s},this.byteToString=function(x){if(typeof x=="string")return x;let s="",n=x;for(let e=0;e<n.length;e++){const t=n[e].toString(2),i=t.match(/^1+?(?=0)/);if(i&&t.length===8){const r=i[0].length;let o=n[e].toString(2).slice(7-r);for(let a=1;a<r;a++)o+=n[a+e].toString(2).slice(2);s+=String.fromCharCode(parseInt(o,2)),e+=r-1}else s+=String.fromCharCode(n[e])}return s}};const N={name:"Login",data(){return{loginForm:{username:null,verifyCode:null,password:null},loginRules:{username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],verifyCode:[{required:!0,message:"\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},verifyImage:"",uuid:null}},created(){this.refreshVCImage()},methods:{refreshVCImage(){A().then(x=>{this.uuid=x.uuid,this.verifyImage="data:image/png;base64,"+x.image})},handleLogin(){this.$refs.loginForm.validate(x=>{if(x){const s=new L;P(this.loginForm.username,s.encryptCustom_CBC(this.loginForm.password,"dA0jU4bN1sE5dB2v","lN0dZ8uG4aY6iF4b"),this.loginForm.verifyCode,this.uuid).then(n=>{let e=n.message;n.code===200?(w(n.token),this.$router.push({path:"/person-center"})):this.$message.error(e)})}})}}};var v=function(){var s=this,n=s._self._c;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h2",[s._v("\u767B\u5F55")])]),n("div",{staticClass:"card_body"},[n("el-form",{ref:"loginForm",staticClass:"login_form",staticStyle:{display:"flex","flex-direction":"column"},attrs:{model:s.loginForm,rules:s.loginRules}},[n("el-form-item",{attrs:{label:"\u7528\u6237\u540D",prop:"username"}},[n("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.handleLogin.apply(null,arguments)}},model:{value:s.loginForm.username,callback:function(e){s.$set(s.loginForm,"username",e)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{label:"\u5BC6\u7801",prop:"password"}},[n("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801","show-password":"",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.handleLogin.apply(null,arguments)}},model:{value:s.loginForm.password,callback:function(e){s.$set(s.loginForm,"password",e)},expression:"loginForm.password"}})],1),n("div",{staticStyle:{display:"flex","column-gap":"20px","align-items":"center"}},[n("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"\u9A8C\u8BC1\u7801",prop:"verifyCode"}},[n("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.handleLogin.apply(null,arguments)}},model:{value:s.loginForm.verifyCode,callback:function(e){s.$set(s.loginForm,"verifyCode",e)},expression:"loginForm.verifyCode"}})],1),n("el-image",{staticStyle:{width:"120px",height:"70px",border:"1px solid black",cursor:"pointer"},attrs:{fit:"fill",src:s.verifyImage},on:{click:s.refreshVCImage}})],1),n("el-form-item",{staticStyle:{margin:"0"}},[n("el-button",{attrs:{type:"text"}},[s._v("\u5FD8\u8BB0\u5BC6\u7801\uFF1F")])],1),n("el-form-item",[n("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",plain:""},on:{click:s.handleLogin}},[s._v("\u767B\u5F55")])],1)],1)],1)])],1)},R=[],O=k(N,v,R,!1,null,"a8a2e5c3",null,null);const M=O.exports;export{M as default};
